{"ast":null,"code":"import _objectSpread from \"/Users/adila/Desktop/face-recognition-adila/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/adila/Desktop/face-recognition-adila/src/views/ImageInput.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { loadModels, getFullFaceDescription } from '../api/face'; // Import image to test API\n\nconst testImg = require('../img/test.jpg'); // Initial State\n\n\nconst INIT_STATE = {\n  imageURL: testImg,\n  fullDesc: null,\n  detections: null\n};\n\nclass ImageInput extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentWillMount = async () => {\n      await loadModels();\n      await this.handleImage(this.state.imageURL);\n    };\n\n    this.handleImage = async (image = this.state.imageURL) => {\n      await getFullFaceDescription(image).then(fullDesc => {\n        if (!!fullDesc) {\n          this.setState({\n            fullDesc,\n            detections: fullDesc.map(fd => fd.detection)\n          });\n        }\n      });\n    };\n\n    this.handleFileChange = async event => {\n      this.resetState();\n      await this.setState({\n        imageURL: URL.createObjectURL(event.target.files[0]),\n        loading: true\n      });\n      this.handleImage();\n    };\n\n    this.resetState = () => {\n      this.setState(_objectSpread({}, INIT_STATE));\n    };\n\n    this.state = _objectSpread({}, INIT_STATE);\n  }\n\n  render() {\n    const _this$state = this.state,\n          imageURL = _this$state.imageURL,\n          detections = _this$state.detections;\n    let drawBox = null;\n\n    if (!!detections) {\n      drawBox = detections.map((detection, i) => {\n        let _H = detection.box.height;\n        let _W = detection.box.width;\n        let _X = detection.box._x;\n        let _Y = detection.box._y;\n        return React.createElement(\"div\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            position: 'absolute',\n            border: 'solid',\n            borderColor: 'blue',\n            height: _H,\n            width: _W,\n            transform: \"translate(\".concat(_X, \"px,\").concat(_Y, \"px)\")\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }));\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"myFileUpload\",\n      type: \"file\",\n      onChange: this.handleFileChange,\n      accept: \".jpg, .jpeg, .png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        position: 'relative'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        position: 'absolute'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: imageURL,\n      alt: \"imageURL\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })), !!drawBox ? drawBox : null));\n  }\n\n}\n\nexport default withRouter(ImageInput);","map":{"version":3,"sources":["/Users/adila/Desktop/face-recognition-adila/src/views/ImageInput.js"],"names":["React","Component","withRouter","loadModels","getFullFaceDescription","testImg","require","INIT_STATE","imageURL","fullDesc","detections","ImageInput","constructor","props","componentWillMount","handleImage","state","image","then","setState","map","fd","detection","handleFileChange","event","resetState","URL","createObjectURL","target","files","loading","render","drawBox","i","_H","box","height","_W","width","_X","_x","_Y","_y","position","border","borderColor","transform"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { loadModels, getFullFaceDescription } from '../api/face';\n\n// Import image to test API\nconst testImg = require('../img/test.jpg');\n\n// Initial State\nconst INIT_STATE = {\n  imageURL: testImg,\n  fullDesc: null,\n  detections: null\n};\n\nclass ImageInput extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { ...INIT_STATE };\n  }\n\n  componentWillMount = async () => {\n    await loadModels();\n    await this.handleImage(this.state.imageURL);\n  };\n\n  handleImage = async (image = this.state.imageURL) => {\n    await getFullFaceDescription(image).then(fullDesc => {\n      if (!!fullDesc) {\n        this.setState({\n          fullDesc,\n          detections: fullDesc.map(fd => fd.detection)\n        });\n      }\n    });\n  };\n\n  handleFileChange = async event => {\n    this.resetState();\n    await this.setState({\n      imageURL: URL.createObjectURL(event.target.files[0]),\n      loading: true\n    });\n    this.handleImage();\n  };\n\n  resetState = () => {\n    this.setState({ ...INIT_STATE });\n  };\n\n  render() {\n    const { imageURL, detections } = this.state;\n\n    let drawBox = null;\n    if (!!detections) {\n      drawBox = detections.map((detection, i) => {\n        let _H = detection.box.height;\n        let _W = detection.box.width;\n        let _X = detection.box._x;\n        let _Y = detection.box._y;\n        return (\n          <div key={i}>\n            <div\n              style={{\n                position: 'absolute',\n                border: 'solid',\n                borderColor: 'blue',\n                height: _H,\n                width: _W,\n                transform: `translate(${_X}px,${_Y}px)`\n              }}\n            />\n          </div>\n        );\n      });\n    }\n\n    return (\n      <div>\n        <input\n          id=\"myFileUpload\"\n          type=\"file\"\n          onChange={this.handleFileChange}\n          accept=\".jpg, .jpeg, .png\"\n        />\n        <div style={{ position: 'relative' }}>\n          <div style={{ position: 'absolute' }}>\n            <img src={imageURL} alt=\"imageURL\" />\n          </div>\n          {!!drawBox ? drawBox : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(ImageInput);"]},"metadata":{},"sourceType":"module"}